"undefined"!=typeof angular&&angular.module("risevision.widget.common.storage-selector.config",[]).value("STORAGE_MODAL","https://storage.risevision.com/files/"),function(){"use strict";angular.module("risevision.widget.common.storage-selector",["ui.bootstrap","risevision.widget.common.storage-selector.config"]).directive("storageSelector",["$templateCache","$modal","$sce","$log","STORAGE_MODAL",function(e,t,o,s,n){return{restrict:"EA",scope:{companyId:"@",fileLabel:"@",folderLabel:"@",customLabel:"@"},template:e.get("storage-selector.html"),link:function(e){function i(t){var o=n+e.companyId;return t?o+"?selector-type=single-file":o+"?selector-type=single-folder"}function l(n){var l=i(n);e.modalInstance=t.open({templateUrl:"storage.html",controller:"StorageCtrl",size:"lg",backdrop:!0,resolve:{storageUrl:function(){return{url:o.trustAsResourceUrl(l)}}}}),e.modalInstance.result.then(function(t){e.files=t,e.$emit("picked",t)},function(){e.canceled=!0,s.info("Modal dismissed at: "+new Date)})}e.isFile=!1,e.isFolder=!1,e.isCustom=!1,e.showFileSelector=function(){e.isFile=!0,e.isFolder=e.isCustom=!1,l(!0),e.$emit("fileSelected")},e.showFolderSelector=function(){e.isFolder=!0,e.isFile=e.isCustom=!1,l(!1),e.$emit("folderSelected")},e.onCustomSelected=function(){e.isCustom=!0,e.isFile=e.isFolder=!1,e.$emit("customSelected")}}}}])}(),angular.module("risevision.widget.common.storage-selector").controller("StorageCtrl",["$scope","$modalInstance","storageUrl","$window","$log","STORAGE_MODAL",function(e,t,o,s,n,i){e.storageUrl=o,e.isSameOrigin=function(e){var t=document.createElement("a");return t.href=i,-1!==e.indexOf(t.host)},e.messageHandler=function(o){e.isSameOrigin(o.origin)&&(Array.isArray(o.data)?t.close(o.data):"string"==typeof o.data&&"close"===o.data&&t.dismiss("cancel"))},s.addEventListener("message",e.messageHandler)}]),function(e){try{e=angular.module("risevision.widget.common.storage-selector")}catch(t){e=angular.module("risevision.widget.common.storage-selector",[])}e.run(["$templateCache",function(e){"use strict";e.put("storage-selector.html",'<div class="row half-top add-bottom">\n  <div class="col-md-12">\n    <button type="button" class="btn btn-default btn-fixed-width file" ng-class="{active: isFile}"\n      ng-click="showFileSelector()">\n      {{ fileLabel }}<img src="http://s3.amazonaws.com/Rise-Images/Icons/storage.png" class="storage-selector-icon icon-right">\n    </button>\n    <button type="button" class="btn btn-default btn-fixed-width folder" ng-class="{active: isFolder}"\n      ng-click="showFolderSelector()">\n      {{ folderLabel }}<img src="http://s3.amazonaws.com/Rise-Images/Icons/storage.png" class="storage-selector-icon icon-right">\n    </button>\n    <button type="button" class="btn btn-default btn-fixed-width custom" ng-class="{active: isCustom}"\n      ng-click="onCustomSelected()">\n      {{ customLabel }}<i class="fa fa-link fa-large"></i>\n    </button>\n  </div>\n</div><!-- .row -->\n\n<script type="text/ng-template" id="storage.html">\n  <iframe class="modal-dialog" scrolling="no" marginwidth="0" src="{{ storageUrl.url }}"></iframe>\n</script>\n')}])}();
if("undefined"==typeof CONFIG){var CONFIG={};"undefined"!=typeof angular&&angular.module("risevision.widget.common.storage-selector.config",[]).constant("STORAGE_MODAL","http://storage.risevision.com/~rvi/storage-client-rva-test/storage-modal.html#/files/")}!function(){"use strict";angular.module("risevision.widget.common.storage-selector",["ui.bootstrap","risevision.widget.common.storage-selector.config"]).directive("storageSelector",["$window","$templateCache","$modal","$sce","$log","STORAGE_MODAL",function(e,t,o,r,n,a){return{restrict:"EA",scope:{local:"@",useCtrl:"@",instanceTemplate:"@",companyId:"@"},template:t.get("storage-selector.html"),link:function(e){e.storageUrl="",e.open=function(){var t=o.open({templateUrl:e.instanceTemplate||"storage.html",controller:e.useCtrl||"StorageCtrl",size:"lg",backdrop:!0,resolve:{storageUrl:function(){return{url:r.trustAsResourceUrl(e.storageUrl)}}}});t.result.then(function(t){e.$emit("picked",t)},function(){n.info("Modal dismissed at: "+new Date)})},e.local?e.storageUrl=a+"local":e.$watch("companyId",function(t){t&&(e.storageUrl=a+t)})}}}])}(),angular.module("risevision.widget.common.storage-selector").controller("StorageCtrl",["$scope","$modalInstance","storageUrl","$window","$log",function(e,t,o,r){e.storageUrl=o,r.addEventListener("message",function(e){"http://storage.risevision.com"===e.origin&&(Array.isArray(e.data)?t.close(e.data):"string"==typeof e.data&&"close"===e.data&&t.dismiss("cancel"))})}]),function(){try{app=angular.module("risevision.widget.common.storage-selector")}catch(e){app=angular.module("risevision.widget.common.storage-selector",[])}app.run(["$templateCache",function(e){"use strict";e.put("storage-selector.html",'<button class="btn btn-widget-icon-storage" ng-click="open()" type="button" />\n<script type="text/ng-template" id="storage.html">\n        <iframe class="modal-dialog" scrolling="no" marginwidth="0" src="{{ storageUrl.url }}"></iframe>\n</script>\n')}])}();
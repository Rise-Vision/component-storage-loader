if("undefined"==typeof CONFIG)var CONFIG={};!function(){"use strict";angular.module("risevision.widget.common.storage-selector",["ui.bootstrap"]).directive("storageSelector",["$window","$templateCache","$modal","$sce","$log",function(t,e,o,r,a){return{restrict:"EA",scope:{local:"@",useCtrl:"@",instanceTemplate:"@",companyid:"="},template:e.get("storage-selector.html"),link:function(t){t.storageUrl="",t.open=function(){var e=o.open({templateUrl:t.instanceTemplate||"storage.html",controller:t.useCtrl||"StorageCtrl",size:"lg",backdrop:!0,resolve:{storageUrl:function(){return{url:r.trustAsResourceUrl(t.storageUrl)}}}});e.result.then(function(e){t.$emit("picked",e)},function(){a.info("Modal dismissed at: "+new Date)})},t.local?t.storageUrl="http://storage.risevision.com/storage-modal.html#/files/local":t.$watch("companyid",function(e){e&&(t.storageUrl="http://storage.risevision.com/storage-modal.html#/files/"+e)})}}}])}(),angular.module("risevision.widget.common.storage-selector").controller("StorageCtrl",["$scope","$modalInstance","storageUrl","$window","$log",function(t,e,o,r){t.storageUrl=o,r.addEventListener("message",function(t){"http://storage.risevision.com"===t.origin&&(Array.isArray(t.data)?e.close(t.data):"string"==typeof t.data&&"close"===t.data&&e.dismiss("cancel"))})}]),function(){try{app=angular.module("risevision.widget.common.storage-selector")}catch(t){app=angular.module("risevision.widget.common.storage-selector",[])}app.run(["$templateCache",function(t){"use strict";t.put("storage-selector.html",'<button class="btn btn-widget-icon-storage" ng-click="open()" type="button" />\n<script type="text/ng-template" id="storage.html">\n        <iframe class="modal-dialog" scrolling="no" marginwidth="0" src="{{ storageUrl.url }}"></iframe>\n</script>\n')}])}();
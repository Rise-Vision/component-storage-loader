"undefined"!=typeof angular&&angular.module("risevision.widget.common.storage-selector.config",[]).value("STORAGE_MODAL","https://storage.risevision.com/files/"),function(){"use strict";angular.module("risevision.widget.common.storage-selector",["ui.bootstrap","risevision.widget.common.storage-selector.config"]).directive("storageSelector",["$templateCache","$modal","$sce","$log","STORAGE_MODAL",function(e,n,t,s,l){return{restrict:"EA",scope:{companyId:"@",type:"@",label:"@",selected:"="},template:e.get("storage-selector.html"),link:function(e){function o(){e.storageUrl="undefined"!=typeof e.type&&""!==e.type?l+e.companyId+"?selector-type="+e.type:l+e.companyId}e.storageUrl="",e.open=function(){e.modalInstance=n.open({templateUrl:"storage.html",controller:"StorageCtrl",size:"md",backdrop:!0,resolve:{storageUrl:function(){return{url:t.trustAsResourceUrl(e.storageUrl)}}}}),e.modalInstance.result.then(function(n){e.files=n,e.$emit("picked",n,e.type)},function(){e.canceled=!0,s.info("Modal dismissed at: "+new Date)})},e.$watch("companyId",function(e){e&&o()}),e.$watch("type",function(e){e&&o()})}}}])}(),angular.module("risevision.widget.common.storage-selector").controller("StorageCtrl",["$scope","$modalInstance","storageUrl","$window","$log","STORAGE_MODAL",function(e,n,t,s,l,o){e.storageUrl=t,e.isSameOrigin=function(e){var n=document.createElement("a");return n.href=o,-1!==e.indexOf(n.host)},e.messageHandler=function(t){e.isSameOrigin(t.origin)&&(Array.isArray(t.data)?n.close(t.data):"string"==typeof t.data&&"close"===t.data&&n.dismiss("cancel"))},s.addEventListener("message",e.messageHandler)}]),function(e){try{e=angular.module("risevision.widget.common.storage-selector")}catch(n){e=angular.module("risevision.widget.common.storage-selector",[])}e.run(["$templateCache",function(e){"use strict";e.put("storage-selector.html",'<button class="btn btn-default" ng-class="{active: selected}" ng-click="open()" type="button" >\n  {{ label }}<img src="http://s3.amazonaws.com/Rise-Images/Icons/storage.png" class="storage-selector-icon" ng-class="{\'icon-right\': label}">\n</button>\n\n<script type="text/ng-template" id="storage.html">  //prototype modal\n        \n\n\n              <button type="button" class="close" data-dismiss="modal" ng-click="closeButtonClick()">\n                <i class="fa fa-times"></i>\n              </button>\n             \n              <h3 update-title="" translate="storage-client.select-single-folder" class="ng-scope">Select a Folder</h3>\n              \n              <div class="selector-header">\n\n                <div class="icon-nav pull-right">\n                  <button class="btn btn-link" ng-click="newFolderButtonClick(\'md\')" ng-disabled="isTrashFolder()">\n                    <svg-icon p="iconNewFolder"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.7 8c-0.8-0.8-1.9-1-3.1-1H15V5.9c0-1.2-0.5-2-1.4-2.8C12.8 2.2 11.7 2 10.5 2H4.3C3.1 2 2.1 2.2 1.3 3.1 0.4 3.9 0 4.7 0 5.9v18.5c0 1.2 0.4 2.3 1.3 3.2C2.1 28.5 3.1 29 4.3 29h23.3c1.2 0 2.2-0.5 3.1-1.4 0.9-0.9 1.3-2 1.3-3.2V10.8C32 9.6 31.6 8.9 30.7 8zM23 20h-5v5h-4v-5H9v-4h5v-5h4v5h5V20"></path><path d=""></path></svg></svg-icon>\n                  </button>\n                  <label for="upload-files" class="btn btn-link" ng-disabled="!(filesDetails.localFiles === false &amp;&amp; !isTrashFolder())">\n                    <i class="fa fa-cloud-upload"></i>\n                  </label>\n                  <button class="btn btn-link" ng-click="showSelectorFileSearch()">\n                    <i class="fa fa-search"></i>\n                  </button>\n                </div>\n        \n                <div class="description">\n                  <p><strong class="ng-binding">Rise Vision Inc.</strong></p>\n                </div>\n        \n                <div class="icon-nav">\n                  \n                </div>\n              </div>\n\n\n\n\n<table class="table-2 table-hover table-selector single-selector" ng-class="storageFull || multipleFileSelector ? \'multiple-selector\' : \'single-selector\'">\n  <thead>\n    <tr>\n      <th class="col-sm-6">\n        <input type="checkbox" class="add-right ng-pristine ng-untouched ng-valid" ng-model="selectAll">\n        <label ng-click="selectAllCheckboxes(query)"></label>\n        <a href="" ng-click="orderByAttribute = fileNameOrderFunction; reverseSort = !reverseSort">\n          <span translate="common.file-name" class="ng-scope">Name</span>\n          <span>\n            <span ng-show="reverseSort" >\n              <i class="fa fa-long-arrow-up"></i>\n            </span>\n            <span ng-show="!reverseSort">\n              <i class="fa fa-long-arrow-down"></i>\n            </span>\n          </span>\n        </a>\n      </th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="clickable-row ng-scope no-select-row" ng-click="fileClick(file);" ng-class="{\'active\': file.isChecked, \'blocked-file\': file.isThrottled, \'back-btn\': file.currentFolder, \'no-select-row\': file.currentFolder || fileIsTrash(file) || (fileIsFolder(file) &amp;&amp; !storageFull) }" ng-repeat="file in filesDetails.files | filter:query | orderBy:orderByAttribute:reverseSort track by $index">\n      <!-- ngIf: fileIsFolder(file) && (!fileIsTrash(file) || storageFull) --><td colspan="4" ng-if="fileIsFolder(file) &amp;&amp; (!fileIsTrash(file) || storageFull)" class="ng-scope">\n        <span class="folder ng-binding">000folder/</span>\n      </td><!-- end ngIf: fileIsFolder(file) && (!fileIsTrash(file) || storageFull) -->\n     \n    </tr>\n  </tbody>\n</table>\n\n          \n\n\n\n\n</script>\n')}])}();